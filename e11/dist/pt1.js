!function(){"use strict";function e(e,r){var n=Mirador({id:"IIIF",layout:"1x1",mainMenuSettings:{show:!1},data:[{manifestUri:e,location:"University of Maryland"}],windowObjects:[{loadedManifest:e,viewType:"ImageView",displayLayout:!1,bottomPanel:!1,sidePanel:!1,annotationLayer:!1}],annotationEndpoint:{name:"Local Storage",module:"LocalStorageEndpoint"}}),o=function(e){n.viewer.workspace.windows[0].setCurrentCanvasID(e),s(e)};n.eventEmitter.subscribe("windowAdded",function(e,a){var i=n.viewer.workspace.windows[0],l="",s=!0,c=!1,d=void 0;try{for(var u,h=Array.from(i.imagesList).entries()[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=t.slicedToArray(u.value,2),v=f[0],y=f[1];$("#pages").append("<a class='dropdown-item' href='#"+(v+1)+"'>"+y.label+"</a>"),v+1==r&&($("#cur_page").text(y.label),l=y["@id"])}}catch(e){c=!0,d=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw d}}var m=!1;n.eventEmitter.subscribe("windowUpdated",function(){m||(m=!0,o(l))}),window.onhashchange=function(){var e=window.location.hash.substring(window.location.hash.indexOf("#")+1);""!=e&&(r=e);var a=!0,n=!1,l=void 0;try{for(var s,c=Array.from(i.imagesList).entries()[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=t.slicedToArray(s.value,2),u=d[0],h=d[1];if($("#pages").append("<a class='dropdown-item' href='#"+(u+1)+"'>"+h.label+"</a>"),u+1==r){r=h["@id"],$("#cur_page").text(h.label),o(r);break}}}catch(e){n=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(n)throw l}}},$("#mnext").click(function(e){var r=!0,a=!1,n=void 0;try{for(var o,l=Array.from(i.imagesList).entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=t.slicedToArray(o.value,2),c=s[0];if(s[1]["@id"]==i.canvasID){i.imagesList[c+1]["@id"];window.location.hash="#"+(c+2);break}}}catch(e){a=!0,n=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw n}}}),$("#mprev").click(function(e){var r=!0,a=!1,n=void 0;try{for(var o,l=Array.from(i.imagesList).entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=t.slicedToArray(o.value,2),c=s[0];if(s[1]["@id"]==i.canvasID){i.imagesList[c-1]["@id"];$("#cur_page").text(i.imagesList[c+1].label),window.location.hash="#"+c;break}}}catch(e){a=!0,n=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw n}}})}),n.eventEmitter.subscribe("windowUpdated",function(){$(".mirador-osd-next").remove(),$(".mirador-osd-previous").remove()}),console.log(n);var l=new a,s=function(e){$("#TEI").children().unbind(),$("#TEI").unbind(),$("#TEI").empty(),l.getHTML5(e,function(e){document.getElementById("TEI").innerHTML="",document.getElementById("TEI").appendChild(e),i(e)})}}var t={};t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},t.slicedToArray=function(){function e(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var r={namespaces:{tei:"http://www.tei-c.org/ns/1.0",teieg:"http://www.tei-c.org/ns/Examples",rng:"http://relaxng.org/ns/structure/1.0"},tei:{eg:["<pre>","</pre>"],ptr:['<a href="$rw@target">$@target</a>'],ref:['<a href="$rw@target">',"</a>"],graphic:function(e){var t=new Image;return t.src=this.rw(e.getAttribute("url")),e.hasAttribute("width")&&t.setAttribute("width",e.getAttribute("width")),e.hasAttribute("height")&&t.setAttribute("height",e.getAttribute("height")),t},list:[["[type=gloss]",function(e){var t=document.createElement("dl"),r=!0,a=!1,n=void 0;try{for(var i,o=Array.from(e.children)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;if(l.nodeType==Node.ELEMENT_NODE){if("tei-label"==l.localName){var s=document.createElement("dt");s.innerHTML=l.innerHTML,t.appendChild(s)}if("tei-item"==l.localName){var c=document.createElement("dd");c.innerHTML=l.innerHTML,t.appendChild(c)}}}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}return t}]],note:[["[place=end]",function(e){this.noteIndex?this.noteIndex++:this.noteIndex=1;var t="_note_"+this.noteIndex,r=document.createElement("a");r.setAttribute("id","src"+t),r.setAttribute("href","#"+t),r.innerHTML=this.noteIndex;var a=document.createElement("sup");a.appendChild(r);var n=this.dom.querySelector("ol.notes");n||(n=document.createElement("ol"),n.setAttribute("class","notes"),this.dom.appendChild(n));var i=document.createElement("li");return i.id=t,i.innerHTML=e.innerHTML,n.appendChild(i),a}],["_",["(",")"]]],table:function(e){var t=document.createElement("table");if(t.innerHTML=e.innerHTML,"tei-head"==t.firstElementChild.localName){var r=t.firstElementChild;r.remove();var a=document.createElement("caption");a.innerHTML=r.innerHTML,t.appendChild(a)}var n=!0,i=!1,o=void 0;try{for(var l,s=Array.from(t.querySelectorAll("tei-row"))[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value,d=document.createElement("tr");d.innerHTML=c.innerHTML;var u=!0,h=!1,f=void 0;try{for(var v,y=Array.from(c.attributes)[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var m=v.value;d.setAttribute(m.name,m.value)}}catch(e){h=!0,f=e}finally{try{!u&&y.return&&y.return()}finally{if(h)throw f}}c.parentElement.replaceChild(d,c)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}var p=!0,b=!1,w=void 0;try{for(var g,E=Array.from(t.querySelectorAll("tei-cell"))[Symbol.iterator]();!(p=(g=E.next()).done);p=!0){var A=g.value,x=document.createElement("td");A.hasAttribute("cols")&&x.setAttribute("colspan",A.getAttribute("cols")),x.innerHTML=A.innerHTML;var N=!0,T=!1,S=void 0;try{for(var k,C=Array.from(A.attributes)[Symbol.iterator]();!(N=(k=C.next()).done);N=!0){var L=k.value;x.setAttribute(L.name,L.value)}}catch(e){T=!0,S=e}finally{try{!N&&C.return&&C.return()}finally{if(T)throw S}}A.parentElement.replaceChild(x,A)}}catch(e){b=!0,w=e}finally{try{!p&&E.return&&E.return()}finally{if(b)throw w}}return t},teiHeader:function(e){this.hideContent(e)},title:[["tei-titlestmt>tei-title",function(e){var t=document.createElement("title");t.innerHTML=e.innerText,document.querySelector("head").appendChild(t)}]]},teieg:{egXML:function(e){var t=document.createElement("pre");return t.innerHTML=this.serialize(e,!0),t}}},a=function(){function e(a){if(t.classCallCheck(this,e),this.els=[],this.namespaces=new Map,this.behaviors={},this.hasStyle=!1,this.prefixDefs=[],a)this.base=a;else try{window&&(this.base=window.location.href.replace(/\/[^\/]*$/,"/"))}catch(e){this.base=""}this.addBehaviors(r),this.shadowCSS,this.supportsShadowDom=document.head.createShadowRoot||document.head.attachShadow}return t.createClass(e,[{key:"getHTML5",value:function(e,t,r){var a=this;return window.location.href.startsWith(this.base)&&e.indexOf("/")>=0&&(this.base=e.replace(/\/[^\/]*$/,"/")),new Promise(function(t,r){var a=new XMLHttpRequest;a.open("GET",e),a.send(),a.onload=function(){this.status>=200&&this.status<300?t(this.response):r(this.statusText)},a.onerror=function(){r(this.statusText)}}).catch(function(e){console.log(e)}).then(function(e){return a.makeHTML5(e,t,r)})}},{key:"makeHTML5",value:function(e,t,r){var a=(new DOMParser).parseFromString(e,"text/xml");return this.domToHTML5(a,t,r)}},{key:"domToHTML5",value:function(e,t,r){var a=this;this._learnElementNames(e);if(this.dom=function e(t){var n=void 0;if(a.namespaces.has(t.namespaceURI)){var i=a.namespaces.get(t.namespaceURI);n=document.createElement(i+"-"+t.localName)}else n=document.importNode(t,!1);var o=!0,l=!1,s=void 0;try{for(var c,d=Array.from(t.attributes)[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;"xmlns"==u.name?n.setAttribute("data-xmlns",u.value):n.setAttribute(u.name,u.value),"xml:id"==u.name&&n.setAttribute("id",u.value),"xml:lang"==u.name&&n.setAttribute("lang",u.value),"rendition"==u.name&&n.setAttribute("class",u.value.replace(/#/g,""))}}catch(e){l=!0,s=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw s}}if(n.setAttribute("data-origname",t.localName),0==t.childNodes.length&&n.setAttribute("data-empty",""),"tagsDecl"==t.localName){var h=document.createElement("style"),f=!0,v=!1,y=void 0;try{for(var m,p=Array.from(t.childNodes)[Symbol.iterator]();!(f=(m=p.next()).done);f=!0){var b=m.value;if(b.nodeType==Node.ELEMENT_NODE&&"rendition"==b.localName&&"css"==b.getAttribute("scheme")){var w="";b.hasAttribute("selector")?(w+=b.getAttribute("selector").replace(/([^#, >]+\w*)/g,"tei-$1").replace(/#tei-/g,"#")+"{\n",w+=b.textContent):(w+="."+b.getAttribute("xml:id")+"{\n",w+=b.textContent),w+="\n}\n",h.appendChild(document.createTextNode(w))}}}catch(e){v=!0,y=e}finally{try{!f&&p.return&&p.return()}finally{if(v)throw y}}h.childNodes.length>0&&(n.appendChild(h),a.hasStyle=!0)}"prefixDef"==t.localName&&(a.prefixDefs.push(t.getAttribute("ident")),a.prefixDefs[t.getAttribute("ident")]={matchPattern:t.getAttribute("matchPattern"),replacementPattern:t.getAttribute("replacementPattern")});var g=!0,E=!1,A=void 0;try{for(var x,N=Array.from(t.childNodes)[Symbol.iterator]();!(g=(x=N.next()).done);g=!0){var T=x.value;T.nodeType==Node.ELEMENT_NODE?n.appendChild(e(T)):n.appendChild(T.cloneNode())}}catch(e){E=!0,A=e}finally{try{!g&&N.return&&N.return()}finally{if(E)throw A}}return r&&r(n),n}(e.documentElement),this.applyBehaviors(),this.done=!0,!t)return window.dispatchEvent(n),this.dom;t(this.dom,this),window.dispatchEvent(n)}},{key:"applyBehaviors",value:function(){window.customElements?this.define(this.els):this.fallback(this.els)}},{key:"addStyle",value:function(e,t){this.hasStyle&&e.getElementsByTagName("head").item(0).appendChild(t.getElementsByTagName("style").item(0).cloneNode(!0))}},{key:"addShadowStyle",value:function(e){this.shadowCSS&&(e.innerHTML='<style>@import url("'+this.shadowCSS+'");</style>'+e.innerHTML)}},{key:"addBehaviors",value:function(e){if(e.namespaces){var t=!0,r=!1,a=void 0;try{for(var n,i=Object.keys(e.namespaces)[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;this.namespaces.has(e.namespaces[o])||Array.from(this.namespaces.values()).includes(o)||this.namespaces.set(e.namespaces[o],o)}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}}var l=!0,s=!1,c=void 0;try{for(var d,u=this.namespaces.values()[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var h=d.value;if(e[h]){var f=!0,v=!1,y=void 0;try{for(var m,p=Object.keys(e[h])[Symbol.iterator]();!(f=(m=p.next()).done);f=!0){var b=m.value;this.behaviors[h+":"+b]=e[h][b]}}catch(e){v=!0,y=e}finally{try{!f&&p.return&&p.return()}finally{if(v)throw y}}}}}catch(e){s=!0,c=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw c}}if(e.handlers){var w=!0,g=!1,E=void 0;try{for(var A,x=Object.keys(e.handlers)[Symbol.iterator]();!(w=(A=x.next()).done);w=!0){var N=A.value;"egXML"!==N?this.behaviors["tei:"+N]=e.handlers[N]:this.behaviors["teieg:egXML"]=e.handlers[N]}}catch(e){g=!0,E=e}finally{try{!w&&x.return&&x.return()}finally{if(g)throw E}}}e.fallbacks&&console.log("Fallback behaviors are no longer used.")}},{key:"addBehavior",value:function(e,t,r){var a=void 0;if(e===Object(e)){var n=!0,i=!1,o=void 0;try{for(var l,s=Object.keys(e)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=l.value;this.namespaces.has(e[c])||(this.namespaces.set(e[c],c),a=c)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}}else a=e;this.behaviors[a+":"+t]=r}},{key:"setBaseUrl",value:function(e){this.base=e}},{key:"_learnElementNames",value:function(e){var t=this,r=e.documentElement;this.els=new Set(Array.from(r.querySelectorAll("*"),function(e){return(t.namespaces.has(e.namespaceURI)?t.namespaces.get(e.namespaceURI)+":":"")+e.localName})),this.els.add((this.namespaces.has(r.namespaceURI)?this.namespaces.get(r.namespaceURI)+":":"")+r.localName)}},{key:"_insert",value:function(e,t){var r=document.createElement("span"),a=!0,n=!1,i=void 0;try{for(var o,l=Array.from(e.childNodes)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;s.nodeType!==Node.ELEMENT_NODE||s.hasAttribute("data-processed")||this._processElement(s)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}return t.length>1?r.innerHTML=t[0]+e.innerHTML+t[1]:r.innerHTML=t[0]+e.innerHTML,r}},{key:"_processElement",value:function(e){if(e.hasAttribute("data-origname")&&!e.hasAttribute("data-processed")){var t=this.getFallback(this._bName(e));t&&(this.append(t,e),e.setAttribute("data-processed",""))}var r=!0,a=!1,n=void 0;try{for(var i,o=Array.from(e.childNodes)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;l.nodeType===Node.ELEMENT_NODE&&this._processElement(l)}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"_template",value:function(e,t){var r=e;if(e.search(/\$(\w*)(@([a-zA-Z:]+))/))for(var a=/\$(\w*)@([a-zA-Z:]+)/g,n=void 0;n=a.exec(e);)t.hasAttribute(n[2])&&(r=n[1]&&this[n[1]]?r.replace(n[0],this[n[1]].call(this,t.getAttribute(n[2]))):r.replace(n[0],t.getAttribute(n[2])));return r}},{key:"_tagName",value:function(e){return e.includes(":"),e.replace(/:/,"-").toLowerCase()}},{key:"_bName",value:function(e){return e.tagName.substring(0,e.tagName.indexOf("-")).toLowerCase()+":"+e.getAttribute("data-origname")}},{key:"decorator",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0]))return this._decorator(e);var t=this;return function(r){var a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;if(r.matches(s[0])||"_"===s[0])return Array.isArray(s[1])?t._decorator(s[1]).call(t,r):s[1].call(t,r)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}}},{key:"_decorator",value:function(e){var t=this;return function(r){for(var a=[],n=0;n<e.length;n++)a.push(t._template(e[n],r));return t._insert(r,a)}}},{key:"getHandler",value:function(e){if(this.behaviors[e])return"[object Function]"==={}.toString.call(this.behaviors[e])?this.append(this.behaviors[e]):this.append(this.decorator(this.behaviors[e]))}},{key:"getFallback",value:function(e){if(this.behaviors[e])return"[object Function]"==={}.toString.call(this.behaviors[e])?this.behaviors[e]:this.decorator(this.behaviors[e])}},{key:"append",value:function(e,t){if(!t){var r=this;return function(){var t=e.call(r,this);t&&!r._childExists(this.firstElementChild,t.nodeName)&&r._appendBasic(this,t)}}var a=e.call(this,t);a&&!this._childExists(t.firstElementChild,a.nodeName)&&this._appendBasic(t,a)}},{key:"attach",value:function(e,t,r){if(e[t].call(e,r),r.nodeType===Node.ELEMENT_NODE){var a=!0,n=!1,i=void 0;try{for(var o,l=Array.from(r.childNodes)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;this._processElement(s)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}}},{key:"_childExists",value:function(e,t){return!(!e||e.nodeName!=t)||e&&e.nextElementSibling&&this._childExists(e.nextElementSibling,t)}},{key:"_appendShadow",value:function(e,t){var r=e.attachShadow({mode:"open"});this.addShadowStyle(r),r.appendChild(t)}},{key:"_appendBasic",value:function(e,t){this.hideContent(e),e.appendChild(t)}},{key:"registerAll",value:function(e){this.define(e)}},{key:"define",value:function(e){var r=this,a=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;try{!function(){var e=r.getHandler(s);window.customElements.define(r._tagName(s),function(r){function a(){t.classCallCheck(this,a);var r=t.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r.matches(":defined")||(e&&e.call(r),r.setAttribute("data-processed","")),r}return t.inherits(a,r),t.createClass(a,[{key:"connectedCallback",value:function(){this.hasAttribute("data-processed")||(e&&e.call(this),this.setAttribute("data-processed",""))}}]),a}(HTMLElement))}()}catch(e){console.log(this._tagName(s)+" couldn't be registered or is already registered."),console.log(e)}}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}},{key:"fallback",value:function(e){var t=!0,r=!1,a=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value,l=this.getFallback(o);if(l){var s=!0,c=!1,d=void 0;try{for(var u,h=Array.from((this.dom&&!this.done?this.dom:document).getElementsByTagName(this._tagName(o)))[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var f=u.value;f.hasAttribute("data-processed")||this.append(l,f)}}catch(e){c=!0,d=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw d}}}}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}}},{key:"rw",value:function(e){return e.match(/^(?:http|mailto|file|\/|#).*$/)?e:this.base+e}},{key:"first",value:function(e){return e.replace(/ .*$/,"")}},{key:"normalizeURI",value:function(e){return this.rw(this.first(e))}},{key:"repeat",value:function(e,t){for(var r="",a=0;a<t;a++)r+=e;return r}},{key:"copyAndReset",value:function(e){return function e(t){var r=t.nodeType===Node.ELEMENT_NODE?document.createElement(t.nodeName):t.cloneNode(!0);if(t.attributes){var a=!0,n=!1,i=void 0;try{for(var o,l=Array.from(t.attributes)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;"data-processed"!==s.name&&r.setAttribute(s.name,s.value)}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}}var c=!0,d=!1,u=void 0;try{for(var h,f=Array.from(t.childNodes)[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value;if(v.nodeType==Node.ELEMENT_NODE){if(!t.hasAttribute("data-empty")){if(v.hasAttribute("data-original")){var y=!0,m=!1,p=void 0;try{for(var b,w=Array.from(v.childNodes)[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var g=b.value;r.appendChild(e(g))}}catch(e){m=!0,p=e}finally{try{!y&&w.return&&w.return()}finally{if(m)throw p}}return r}r.appendChild(e(v))}}else r.appendChild(v.cloneNode())}}catch(e){d=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}return r}(e)}},{key:"serialize",value:function(e,t){var r="";if(!t){r+="&lt;"+e.getAttribute("data-origname");var a=!0,n=!1,i=void 0;try{for(var o,l=Array.from(e.attributes)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;s.name.startsWith("data-")||["id","lang","class"].includes(s.name)||(r+=" "+s.name+'="'+s.value+'"'),"data-xmlns"==s.name&&(r+=' xmlns="'+s.value+'"')}}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}e.childNodes.length>0?r+=">":r+="/>"}var c=!0,d=!1,u=void 0;try{for(var h,f=Array.from(e.childNodes)[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value;switch(v.nodeType){case Node.ELEMENT_NODE:r+=this.serialize(v);break;case Node.PROCESSING_INSTRUCTION_NODE:r+="&lt;?"+v.nodeValue+"?>";break;case Node.COMMENT_NODE:r+="&lt;!--"+v.nodeValue+"--\x3e";break;default:r+=v.nodeValue.replace(/</g,"&lt;")}}}catch(e){d=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}return!t&&e.childNodes.length>0&&(r+="&lt;/"+e.getAttribute("data-origname")+">"),r}},{key:"hideContent",value:function(e){if(e.childNodes.length>0){var t=document.createElement("span");e.appendChild(t),t.setAttribute("hidden",""),t.setAttribute("data-original","");var r=!0,a=!1,n=void 0;try{for(var i,o=Array.from(e.childNodes)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;l!==t&&t.appendChild(e.removeChild(l))}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}}}},{key:"unEscapeEntities",value:function(e){return e.replace(/&gt;/,">").replace(/&quot;/,'"').replace(/&apos;/,"'").replace(/&amp;/,"&")}},{key:"fromODD",value:function(){}}],[{key:"savePosition",value:function(){window.localStorage.setItem("scroll",window.scrollY)}},{key:"restorePosition",value:function(){window.location.hash?setTimeout(function(){document.querySelector(window.location.hash).scrollIntoView()},100):window.localStorage.getItem("scroll")&&setTimeout(function(){window.scrollTo(0,localStorage.getItem("scroll"))},100)}}]),e}();try{if(window){window.CETEI=a,window.addEventListener("beforeunload",a.savePosition);var n=new Event("ceteiceanload");window.addEventListener("ceteiceanload",a.restorePosition)}}catch(e){}var i=function(e){var r=$(e),a=r.find("tei-zone[type=main]");r.find("tei-line:has(tei-add[place=superlinear])").css("margin-top",".5em"),r.find("tei-line:has(tei-add[place=sublinear])").each(function(e,r){var a=$(r);a.css("margin-bottom",".5em");var n=a.find("tei-add[place=sublinear]"),i=!0,l=!1,s=void 0;try{for(var c,d=Array.from(n).entries()[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=t.slicedToArray(c.value,2),h=u[0],f=u[1],v=n[h-1];if(null!=v){var y=v.getBoundingClientRect(),m=f.getBoundingClientRect();if(o(y,m)){var p=y.right-m.left;$(f).css("padding-left",p+10+"px")}if($(f).closest("tei-add").length>0){var b=parseInt(a.css("padding-top").replace(/^(\d+).*?$/,"$1"));a.css("padding-top",b+10+"px")}}}}catch(e){l=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw s}}}),r.find("tei-line:has(tei-add[place=superlinear])").each(function(e,r){var a=$(r);a.css("margin-top",".5em");var n=a.find("tei-add[place=superlinear]"),i=!0,l=!1,s=void 0;try{for(var c,d=Array.from(n).entries()[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=t.slicedToArray(c.value,2),h=u[0],f=u[1],v=n[h-1];if(null!=v){var y=v.getBoundingClientRect(),m=f.getBoundingClientRect();if(o(y,m)){var p=y.right-m.left;$(f).css("padding-left",p+10+"px")}if($(f).closest("tei-add").length>0){var b=parseInt(a.css("padding-top").replace(/^(\d+).*?$/,"$1"));a.css("padding-top",b+10+"px")}}}}catch(e){l=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw s}}});var n=r.find("tei-zone[type=left_margin]");n.length>0&&a.css("margin-left","10em"),n.css("margin-top",a.position().top),n.each(function(e,t){$(t).css("top",e*(100/n.length)+"%")});var i=r.find("tei-line"),l=0;i.each(function(e,t){var r=$(t).clone().children().remove().end().text().length;l=r>l?r:l}),$("tei-line[rend='center']").each(function(e,t){$(t).css("padding-left",(l-$(t).text().length)/2+"ex")});var s=r.width()/10;$("tei-line[rend^='indent']").each(function(e,t){var r=/^indent(\d+)/.exec($(t).attr("rend"))[1],a=parseInt(r)*s;$(t).css("padding-left",a)})},o=function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)};$("#charlie").parent().click(function(e){var t=1,r=window.location.hash.substring(window.location.hash.indexOf("#")+1);""!=r&&(t=r),window.location=location.pathname+"charlie/#"+t}),$("#victoria").parent().click(function(e){var t=window.location.hash.substring(window.location.hash.indexOf("#")+1);window.location=location.pathname.replace(/\/charlie\/?/,"")+"/#"+l});var l="1",s=window.location.hash.substring(window.location.hash.indexOf("#")+1);""!=s&&(l=s),window.startpt1=e}();